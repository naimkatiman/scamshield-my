name = "scamshield-my"
main = "src/index.ts"
compatibility_date = "2025-12-01"
workers_dev = true

[observability]
enabled = true
head_sampling_rate = 0.2

[vars]
APP_NAME = "ScamShield MY"
REGION = "MY"
PROVIDER_MODE = "mock"  # Set to "live" for production
WARNING_CARD_RENDER_MODE = "auto"
AI_STRICT_MODE = "false"
OPENROUTER_CHAT_MODELS = "google/gemini-3-flash-preview:online"
OPENROUTER_REPORT_MODELS = "google/gemini-3-flash-preview:online,google/gemini-2.5-flash:online"
OPENROUTER_REFERER = "https://scamshield-my.m-naim.workers.dev"
CORS_ALLOWED_ORIGINS = "http://127.0.0.1:8787,http://localhost:8787,http://localhost:5173"
PUBLIC_PARTNERSHIPS_ENABLED = "false"
GOOGLE_CLIENT_ID = "TODO_GOOGLE_CLIENT_ID"
GOOGLE_REDIRECT_URI = "TODO_GOOGLE_REDIRECT_URI"
BROWSER_RENDERING_ACCOUNT_ID = "TODO_CF_ACCOUNT_ID"
ADMIN_EMAILS = "admin@example.com"

# Scam Intelligence Provider API Base URLs (defaults)
# Set these to override default endpoints
GOPLUS_API_BASE = "https://api.gopluslabs.io"
HONEYPOT_API_BASE = "https://api.honeypot.is"
CHAINABUSE_API_BASE = "https://api.chainabuse.com"
CRYPTOSCAMDB_API_BASE = "https://api.cryptoscamdb.org"

# Sensitive values must be provision in a production environment as Worker secrets (never commit real values):
# - JWT_SECRET
# - GOOGLE_CLIENT_SECRET
# - OPENROUTER_API_KEY
# - CF_BROWSER_RENDERING_TOKEN
# - GOPLUS_APP_KEY
# - GOPLUS_APP_SECRET
# - COINGECKO_API_KEY
# - CHAINABUSE_API_KEY
# - CRYPTOSCAMDB_API_KEY

[assets]
directory = "./client/dist"    # React build output (was ./public)
binding = "ASSETS"
not_found_handling = "single-page-application"
run_worker_first = ["/api/*"]

# Replace all TODO_DEPLOY_* values before deploying.

[[d1_databases]]
binding = "DB"
database_name = "scamshield_d1"
database_id = "TODO_DEPLOY_D1_DATABASE_ID"

[[kv_namespaces]]
binding = "CACHE_KV"
id = "TODO_DEPLOY_CACHE_KV_ID"

[[kv_namespaces]]
binding = "RATE_LIMIT_KV"
id = "TODO_DEPLOY_RATE_LIMIT_KV_ID"

[[r2_buckets]]
binding = "FILES_BUCKET"
bucket_name = "TODO_DEPLOY_R2_BUCKET"

[[queues.producers]]
binding = "ENRICHMENT_QUEUE"
queue = "TODO_DEPLOY_QUEUE_NAME"

[[queues.consumers]]
queue = "TODO_DEPLOY_QUEUE_NAME"
max_batch_size = 5

[[analytics_engine_datasets]]
binding = "SCAMSHIELD_METRICS"
dataset = "TODO_DEPLOY_ANALYTICS_DATASET"

[triggers]
crons = ["0 1 * * *"]
